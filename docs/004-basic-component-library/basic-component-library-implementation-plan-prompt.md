# 基础组件库技术实现规划提示词文档

**文档用途**: `/speckit.plan` 命令专用技术实现规划生成提示词
**项目名称**: FlowBase - 全栈低代码开发平台
**功能模块**: 基础组件库 (004-basic-component-library)
**创建日期**: 2025-10-28
**文档版本**: v1.0

---

## 1. 命令执行上下文

### 当前项目状态

- **技术栈**: Next.js 15 + React 19 + TypeScript + Supabase
- **认证系统**: 已完成完整的用户认证功能（注册、登录、密码重置）
- **UI框架**: shadcn/ui + Tailwind CSS
- **状态管理**: Zustand
- **数据库**: Supabase PostgreSQL + RLS权限系统
- **已完成模块**: 用户认证系统 (001)、项目管理 (002)、数据模型设计器 (003)、页面设计器 (003)

### 功能分支信息

- **分支名称**: `004-basic-component-library`
- **功能状态**: 需求已定义，待实现规划
- **优先级**: P1核心功能，低代码平台基础能力
- **对应规格**: [基础组件库功能规格文档](../../specs/004-basic-component-library/spec.md)

---

## 2. 技术实现规划模板

### 使用说明

将以下内容作为 `/speckit.plan` 命令的输入，系统将基于当前项目技术栈和需求文档生成详细的实现规划。

```
请基于以下上下文信息，为FlowBase低代码平台的基础组件库功能生成详细的技术实现规划：

## 项目技术背景
### 现有技术栈
- 前端：Next.js 15 + React 19 + TypeScript + Tailwind CSS + shadcn/ui
- 后端：Supabase (PostgreSQL + Auth + Storage + Edge Functions)
- 状态管理：Zustand
- 构建工具：Turbopack
- 认证：@supabase/ssr + 基于Cookie的会话管理

### 当前项目结构
```

/app/ # Next.js App Router
/auth/ # ✅ 已完成认证页面
/protected/ # ✅ 受保护的路由
/designer/ # 🚧 页面设计器已实现
/api/ # API路由
/designer/ # ✅ 设计器API已实现
/components/ # React组件
/lowcode/ # 🚧 待开发的低代码组件
/basic/ # 🚧 基础组件(Input, Button, etc.)
/layout/ # 🚧 布局组件(Container, Row, Col, etc.)
/display/ # 🚧 展示组件(Text, Image, Card, etc.)
/ui/ # ✅ 已有shadcn/ui组件
/lib/ # 工具库
/designer/ # ✅ 设计器核心逻辑已实现
/lowcode/ # 🚧 待开发的组件库核心逻辑
/supabase/ # ✅ 已有Supabase配置
/stores/ # Zustand状态管理
/types/ # TypeScript类型定义

```

## 功能需求概述
### 核心功能 (来自规格文档)
1. **表单组件** (6个): Input输入框、Textarea文本域、Select选择器、Checkbox复选框、Radio单选框、Button按钮
2. **展示组件** (6个): Text文本、Heading标题、Image图片、Card卡片、Badge徽章
3. **布局组件** (5个): Container容器、Row行、Col列、Divider分割线、Spacer间距器
4. **属性配置系统**: 支持常用属性配置（基础样式、间距、边框、文本样式、ID、CSS类名）
5. **验证规则系统**: 基础验证规则（必填、长度限制、邮箱格式、数字范围）
6. **主题系统**: 预设主题方案（明亮、暗黑、高对比度3种固定主题）
7. **响应式设计**: 简化断点（mobile<768px、tablet 768-1024px、desktop≥1024px）

### 关键澄清结果
- 用户权限：无角色区分，所有用户拥有相同权限
- 验证规则复杂度：基础验证规则（必填、长度限制、邮箱格式、数字范围）
- 响应式断点：简化断点（mobile、tablet、desktop）
- 主题系统：预设主题方案（明亮、暗黑、高对比度）
- 属性配置深度：常用属性（基础样式、间距、边框、文本样式）

### 用户故事要点
- 用户5分钟内使用基础组件库构建包含表单和内容展示的完整页面
- 100%组件支持实时属性配置和预览，配置响应时间<200ms
- 用户对组件易用性满意度评分>90%
- 新用户首次使用组件库成功率>85%
- 组件库代码复用率>95%

### 关键实体识别
- **组件定义**: 组件类型、默认属性、可配置属性的结构
- **样式配置**: CSS样式属性和主题映射关系
- **布局配置**: Container、Row、Col等布局组件的嵌套关系和响应式规则
- **事件配置**: 事件处理器和绑定关系
- **数据绑定**: 表单组件与数据源的双向绑定关系

## 技术约束要求
### 性能要求
- 所有组件页面LCP时间<2.5秒
- 组件库打包后JavaScript文件大小<200KB
- 组件属性配置响应时间<100ms
- 组件拖拽操作响应延迟<50ms
- 单元测试覆盖率>90%

### 安全要求
- 基于Supabase RLS的权限控制
- 所有组件支持WCAG 2.1 AA无障碍标准
- 防止XSS和恶意代码注入
- 安全的组件属性存储和渲染

### 兼容性要求
- 支持现代浏览器（Chrome 88+, Firefox 85+, Safari 14+）
- 响应式设计，适配桌面端
- 组件在不同设备显示一致性>95%

## 集成要求
### 与现有系统集成
- 无缝集成现有页面设计器系统
- 利用现有shadcn/ui组件库作为基础
- 遵循现有项目架构和代码规范
- 与后续数据绑定功能预留接口

### 组件架构要求
- 基于React 19的现代化组件架构
- 支持组件的动态注册和发现
- 统一的属性配置接口
- 可扩展的组件类型系统

### 设计器集成要求
- 组件在设计器中可正常拖拽和配置
- 属性面板自动适配组件属性
- 实时预览功能完整支持
- 与设计器的状态管理系统集成

请生成包含以下内容的详细技术实现规划：
1. 整体架构设计方案
2. 组件系统设计
3. 属性配置系统设计
4. 主题系统设计
5. 验证规则系统设计
6. 响应式布局系统设计
7. 页面设计器集成方案
8. 关键技术实现细节
9. 开发步骤和里程碑
10. 风险识别和应对方案
```

---

## 3. 预期输出内容

### 架构设计部分应包含

- 基础组件库的整体架构图
- 组件分类和组织结构
- 组件注册和发现机制
- 属性配置系统架构
- 主题系统技术架构

### 组件系统设计部分应包含

- 表单组件详细设计(Input, Textarea, Select, Checkbox, Radio, Button)
- 展示组件详细设计(Text, Heading, Image, Card, Badge)
- 布局组件详细设计(Container, Row, Col, Divider, Spacer)
- 组件接口标准化规范
- 组件生命周期管理

### 属性配置系统设计部分应包含

- 统一的属性配置接口设计
- 属性类型系统(颜色、尺寸、间距、边框等)
- 属性验证和转换逻辑
- 实时预览机制
- 属性持久化方案

### 主题系统设计部分应包含

- 3种预设主题的详细设计(明亮、暗黑、高对比度)
- 主题变量系统设计
- 主题切换机制
- 组件主题适配方案
- 自定义主题扩展接口

### 验证规则系统设计部分应包含

- 验证规则类型定义(必填、长度、格式、数值范围)
- 验证规则配置界面
- 客户端验证逻辑
- 错误提示系统
- 验证规则扩展机制

### 响应式布局系统设计部分应包含

- 简化断点系统实现(mobile, tablet, desktop)
- 响应式属性配置
- 布局组件响应式逻辑
- 预览设备切换功能
- 响应式测试工具

### 页面设计器集成方案部分应包含

- 组件在设计器中的注册机制
- 属性面板的动态生成
- 拖拽操作的适配
- 实时预览的集成
- 组件状态同步机制

### 技术实现部分应包含

- 组件渲染引擎优化
- 属性配置的高性能更新
- 主题系统的动态切换
- 验证规则的实时执行
- 组件懒加载和性能优化

### 开发计划部分应包含

- 详细的开发步骤(按组件类型分组)
- 关键里程碑定义
- 依赖关系识别
- 时间估算
- 验收标准定义

### 风险管理部分应包含

- 组件性能风险识别
- 属性配置复杂度风险
- 主题系统兼容性风险
- 浏览器兼容性风险
- 应对解决方案

---

## 4. 技术实现重点提示

### 4.1 组件架构要点

- 基于Composition API的组件设计
- 统一的组件属性接口规范
- 组件的可扩展性和可复用性
- 组件的性能优化策略
- 组件的类型安全保障

### 4.2 属性配置要点

- 动态属性配置界面生成
- 属性类型的安全验证
- 实时预览的高性能实现
- 属性冲突检测和解决
- 属性配置的撤销重做

### 4.3 主题系统要点

- CSS变量的动态切换机制
- 主题状态的持久化存储
- 组件主题的继承和覆盖
- 主题切换的平滑过渡
- 主题系统的性能优化

### 4.4 验证系统要点

- 声明式验证规则配置
- 异步验证支持
- 验证错误的友好提示
- 验证性能优化
- 验证规则的可组合性

### 4.5 设计器集成要点

- 组件的自动发现和注册
- 属性面板的智能生成
- 拖拽操作的无缝集成
- 状态同步的高效实现
- 组件版本管理和兼容性

---

## 5. 输出格式要求

### 文档结构

1. **执行摘要** - 技术方案概述
2. **架构设计** - 系统架构和核心组件
3. **详细实现** - 各模块具体实现方案
4. **开发计划** - 分阶段实施计划
5. **风险管理** - 风险识别和应对措施

### 代码示例要求

- 提供关键组件的TypeScript代码片段
- 包含完整的类型定义
- 遵循项目现有代码规范
- 注释清晰，便于理解

### 图表要求

- 使用Mermaid语法绘制架构图
- 提供清晰的组件关系图
- 包含数据流程图
- 标注关键技术决策点

---

## 6. 使用指南

### 执行命令

```bash
/speckit.plan [将上述模板内容粘贴为输入]
```

### 预期结果

执行后将生成一个名为 `plan.md` 的文档，包含：

- 详细的技术架构设计
- 完整的实现步骤规划
- 具体的代码示例和配置
- 明确的里程碑和验收标准
- 全面的风险识别和应对方案

### 后续使用

生成的规划文档将作为：

- 开发团队的技术指导文档
- 项目进度跟踪的基准
- 代码审查的参考标准
- 组件库扩展的技术基础

---

## 7. 相关文档

- [基础组件库功能规格](../../specs/004-basic-component-library/spec.md)
- [项目管理功能实现规划](../001-project-management/speckit-plan-prompt.md)
- [数据模型设计器实现规划](../002-data-model-designer/data-model-designer-implementation-plan-prompt.md)
- [页面设计器实现规划](../003-page-designer/page-designer-implementation-plan-prompt.md)

---

**文档结束**

_注：本提示词文档专为FlowBase项目的基础组件库功能定制，确保生成的技术规划与项目现有技术栈和架构完美契合，同时为页面设计器提供完整的组件支持，为后续的数据绑定和高级功能奠定坚实基础。_
