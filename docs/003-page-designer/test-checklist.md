# 页面设计器功能自测清单

**文档版本**: v1.0
**最后更新**: 2025-10-28
**测试分支**: 003-page-designer

## 📋 自测总览

### 测试环境要求

- [ ] 开发服务器正常运行 (`pnpm dev`)
- [ ] 数据库连接正常
- [ ] 浏览器: Chrome 88+ / Firefox 85+ / Safari 14+
- [ ] 屏幕分辨率: 1920x1080 (推荐)
- [ ] 网络环境: 正常宽带连接

### 测试前准备

- [ ] 清理浏览器缓存和Cookie
- [ ] 确保用户已登录系统
- [ ] 打开开发者工具监控控制台错误
- [ ] 准备计时器测量响应时间

---

## 🎯 User Story 1 - 组件拖拽到画布 (P1-MVP)

### 1.1 组件面板功能测试

- [ ] **面板显示**
  - [ ] 左侧组件面板正常显示
  - [ ] 基础组件列表: Button, Input, Text, Image 显示正确
  - [ ] 组件图标清晰可辨
  - [ ] 组件名称显示正确 (中文)

- [ ] **交互效果**
  - [ ] 鼠标悬停组件时有高亮效果
  - [ ] 组件可拖拽 (鼠标变成抓手图标)
  - [ ] 面板滚动正常 (如果组件较多)
  - [ ] 面板宽度可调整 (如果有此功能)

### 1.2 拖拽功能测试

- [ ] **Button组件拖拽**
  - [ ] 从面板拖拽Button到画布中央
  - [ ] 拖拽过程中有预览效果
  - [ ] 释放鼠标后Button出现在正确位置
  - [ ] Button组件样式正确 (按钮文本、颜色等)

- [ ] **Input组件拖拽**
  - [ ] 从面板拖拽Input到画布
  - [ ] Input组件正确显示 (输入框样式)
  - [ ] Input组件可以接收焦点
  - [ ] 可以在Input中输入文本

- [ ] **Text组件拖拽**
  - [ ] 从面板拖拽Text到画布
  - [ ] Text组件显示默认文本内容
  - [ ] 文本样式正确 (字体、大小、颜色)

- [ ] **Image组件拖拽**
  - [ ] 从面板拖拽Image到画布
  - [ ] Image组件显示占位符或默认图片
  - [ ] 图片尺寸和显示正常

### 1.3 拖拽交互测试

- [ ] **拖拽反馈**
  - [ ] 拖拽开始时有视觉反馈
  - [ ] 拖拽经过画布时显示拖拽指示器
  - [ ] 拖拽到画布外释放，组件不被添加
  - [ ] 拖拽过程流畅，无卡顿

- [ ] **边界情况**
  - [ ] 拖拽到画布边界时的处理
  - [ ] 快速连续拖拽多个组件
  - [ ] 拖拽过程中页面刷新的处理
  - [ ] 网络延迟时的拖拽体验

### 1.4 性能指标验证

- [ ] **响应时间**
  - [ ] 拖拽响应时间 < 50ms (使用Performance API测量)
  - [ ] 组件添加后渲染时间 < 100ms
  - [ ] 95%的操作在100ms内提供反馈

- [ ] **用户效率**
  - [ ] 新用户30秒内完成首次拖拽操作
  - [ ] 拖拽成功率 > 95%

---

## 🏗️ User Story 2 - 基础布局系统 (P1-MVP)

### 2.1 Container容器组件测试

- [ ] **Container拖拽和显示**
  - [ ] 从布局组件区域拖拽Container到画布
  - [ ] Container组件正确显示 (容器边框可见)
  - [ ] Container尺寸和位置正确

- [ ] **Container嵌套功能**
  - [ ] 其他组件可拖拽到Container内部
  - [ ] 拖入Container的组件成为子元素
  - [ ] Container边界清晰，嵌套关系可见
  - [ ] Container内的组件正常显示和交互

### 2.2 Row行布局组件测试

- [ ] **Row组件功能**
  - [ ] Row组件可拖拽到画布
  - [ ] Row组件显示为水平排列区域
  - [ ] Row组件样式正确 (高度、边框等)

- [ ] **Row约束验证**
  - [ ] Row只能包含Col组件 (约束规则执行)
  - [ ] 尝试拖拽其他组件到Row时被阻止
  - [ ] 约束违规时有明确提示信息

### 2.3 Col列布局组件测试

- [ ] **Col组件功能**
  - [ ] Col组件可拖拽到Row内部
  - [ ] Col组件在Row中正确显示
  - [ ] 多个Col在Row中水平排列

- [ ] **Col内容承载**
  - [ ] Col可包含基础组件 (Button, Input, Text, Image)
  - [ ] Col可包含Container组件
  - [ ] Col内组件正常显示和交互

- [ ] **Col宽度调整**
  - [ ] 选中Col后可调整宽度属性
  - [ ] 宽度调整后Col按比例重新排列
  - [ ] 宽度属性在属性面板正确显示

### 2.4 布局约束测试

- [ ] **嵌套规则**
  - [ ] Container可包含所有组件类型
  - [ ] Row只能包含Col组件
  - [ ] Col可包含基础组件和Container
  - [ ] 基础组件不能包含子组件

- [ ] **约束验证**
  - [ ] 无效嵌套被正确阻止
  - [ ] 约束违规时有用户友好的提示
  - [ ] 布局结构验证实时生效

### 2.5 响应式布局测试

- [ ] **断点响应**
  - [ ] 布局在不同屏幕尺寸下正确响应
  - [ ] Row/Col的响应式行为符合预期
  - [ ] 组件在响应式切换时位置正确

### 2.6 性能指标验证

- [ ] **布局计算**
  - [ ] 布局更新响应时间 < 100ms
  - [ ] 复杂嵌套布局渲染正常
  - [ ] 布局约束验证不影响性能

- [ ] **用户效率**
  - [ ] 用户2分钟内创建包含标题、按钮、输入框的表单页面
  - [ ] 布局操作成功率 > 95%

---

## ✏️ User Story 3 - 组件选择和移动 (P2)

### 3.1 组件选择功能测试

- [ ] **单选功能**
  - [ ] 点击画布上的组件可选中
  - [ ] 选中的组件显示选中边框
  - [ ] 选中组件显示控制手柄 (resize handles等)
  - [ ] 选中状态视觉反馈清晰明显

- [ ] **多选功能**
  - [ ] 按住Ctrl/Cmd键点击可多选组件
  - [ ] 框选功能可选择多个组件
  - [ ] 多选状态视觉反馈正确
  - [ ] 多选组件可进行批量操作

### 3.2 组件移动功能测试

- [ ] **拖拽移动**
  - [ ] 选中组件后可拖拽移动
  - [ ] 移动过程中有位置指示器
  - [ ] 移动时显示坐标或对齐辅助线
  - [ ] 释放鼠标后组件移动到新位置

- [ ] **精确移动**
  - [ ] 使用键盘方向键可微调位置
  - [ ] 键盘移动步长合理 (如1px或5px)
  - [ ] 移动操作可撤销

### 3.3 组件删除功能测试

- [ ] **键盘删除**
  - [ ] 选中组件后按Delete键删除
  - [ ] 删除确认提示 (如果启用)
  - [ ] 删除后组件从画布移除
  - [ ] 删除后选中状态正确处理

- [ ] **右键删除**
  - [ ] 右键菜单提供删除选项
  - [ ] 右键删除功能正常
  - [ ] 删除操作有确认机制

### 3.4 属性编辑功能测试

- [ ] **属性面板显示**
  - [ ] 选中组件后右侧属性面板显示对应属性
  - [ ] 属性面板根据组件类型动态调整
  - [ ] 属性分类清晰 (基础属性、样式属性等)

- [ ] **文本属性编辑**
  - [ ] Button组件的文本属性可编辑
  - [ ] Text组件的内容可编辑
  - [ ] Input组件的占位符可编辑
  - [ ] 文本修改实时反映到组件

- [ ] **样式属性编辑**
  - [ ] 颜色选择器功能正常
  - [ ] 尺寸属性 (宽度、高度) 可调整
  - [ ] 字体大小、颜色等样式可修改
  - [ ] 样式修改实时生效

- [ ] **其他属性编辑**
  - [ ] 可见性属性切换正常
  - [ ] 组件ID等只读属性正确显示
  - [ ] 自定义属性 (如有) 可编辑

### 3.5 高级编辑功能测试

- [ ] **复制粘贴**
  - [ ] 选中组件可复制 (Ctrl+C/Cmd+C)
  - [ ] 复制的组件可粘贴 (Ctrl+V/Cmd+V)
  - [ ] 粘贴的组件位置合理
  - [ ] 复制粘贴保持组件属性

- [ ] **撤销重做**
  - [ ] 操作可撤销 (Ctrl+Z/Cmd+Z)
  - [ ] 撤销后可重做 (Ctrl+Y/Cmd+Y)
  - [ ] 撤销重做历史正确维护
  - [ ] 历史记录容量合理 (建议50条)

### 3.6 性能指标验证

- [ ] **选择性能**
  - [ ] 组件选择响应时间 < 50ms
  - [ ] 多选操作响应及时
  - [ ] 选中状态渲染流畅

- [ ] **移动性能**
  - [ ] 拖拽移动响应时间 < 50ms
  - [ ] 移动过程流畅无卡顿
  - [ ] 复杂布局中移动性能正常

- [ ] **属性编辑性能**
  - [ ] 属性修改实时生效
  - [ ] 属性面板切换流畅
  - [ ] 大量属性时不影响性能

---

## 🔍 User Story 4 - 画布缩放和对齐 (P3)

### 4.1 缩放功能测试

- [ ] **缩放控件**
  - [ ] 工具栏显示缩放控件
  - [ ] 放大按钮 (+) 功能正常
  - [ ] 缩小按钮 (-) 功能正常
  - [ ] 重置缩放按钮 (100%) 功能正常

- [ ] **缩放交互**
  - [ ] 缩放过程中组件保持清晰
  - [ ] 缩放后拖拽操作仍然正常
  - [ ] 缩放状态在工具栏正确显示
  - [ ] 支持键盘快捷键缩放 (Ctrl+滚轮)

- [ ] **缩放范围**
  - [ ] 最小缩放限制 (如25%)
  - [ ] 最大缩放限制 (如200%)
  - [ ] 缩放步长合理 (如25%)

### 4.2 对齐辅助线测试

- [ ] **辅助线显示**
  - [ ] 拖拽组件接近其他组件时显示对齐辅助线
  - [ ] 辅助线在组件边缘对齐时准确显示
  - [ ] 辅助线颜色和样式清晰可辨
  - [ ] 辅助线不影响组件操作

- [ ] **对齐计算**
  - [ ] 左对齐辅助线准确
  - [ ] 右对齐辅助线准确
  - [ ] 中心对齐辅助线准确
  - [ ] 边界对齐辅助线准确

### 4.3 网格对齐功能测试

- [ ] **网格显示**
  - [ ] 网格显示开关功能正常
  - [ ] 网格大小合理 (建议8px)
  - [ ] 网格线条清晰但不干扰设计
  - [ ] 网格颜色对比度适中

- [ ] **网格吸附**
  - [ ] 组件自动吸附到网格
  - [ ] 吸附力度适中 (不要过强)
  - [ ] 网格吸附可关闭
  - [ ] 精细移动时可暂时禁用吸附

### 4.4 小地图功能测试

- [ ] **小地图显示**
  - [ ] 小地图正确显示整个画布
  - [ ] 小地图中显示当前视口范围
  - [ ] 小地图中组件位置正确
  - [ ] 小地图缩放级别合适

- [ ] **小地图交互**
  - [ ] 点击小地图可快速导航到对应位置
  - [ ] 拖拽小地图视口可移动画布
  - [ ] 小地图实时更新画布状态

### 4.5 性能指标验证

- [ ] **缩放性能**
  - [ ] 缩放操作响应时间 < 100ms
  - [ ] 缩放不影响拖拽性能
  - [ ] 大缩放比例时渲染正常

- [ ] **对齐性能**
  - [ ] 对齐计算不影响拖拽流畅性
  - [ ] 辅助线显示及时准确
  - [ ] 复杂布局中对齐性能正常

- [ ] **用户效率**
  - [ ] 对齐辅助线帮助用户5秒内完成精确对齐
  - [ ] 小地图提高大画布导航效率

---

## 💾 数据持久化功能测试

### 5.1 自动保存功能测试

- [ ] **保存机制**
  - [ ] 设计内容自动保存 (建议30秒间隔)
  - [ ] 保存状态有明确指示器
  - [ ] 保存失败时有错误提示
  - [ ] 保存成功后有成功反馈

- [ ] **保存内容**
  - [ ] 组件树结构完整保存
  - [ ] 组件属性完整保存
  - [ ] 布局关系正确保存
  - [ ] 样式配置完整保存

### 5.2 数据恢复功能测试

- [ ] **页面刷新恢复**
  - [ ] 刷新页面后设计内容正确恢复
  - [ ] 组件位置和属性保持一致
  - [ ] 布局结构正确恢复
  - [ ] 样式配置正确恢复

- [ ] **跨会话恢复**
  - [ ] 重新登录后设计内容可访问
  - [ ] 不同设备间设计数据同步 (如支持)
  - [ ] 数据版本管理正确

### 5.3 数据完整性测试

- [ ] **数据格式**
  - [ ] 保存的数据格式为JSON
  - [ ] JSON结构符合设计规范
  - [ ] 数据字段完整无缺失
  - [ ] 数据类型正确

- [ ] **错误处理**
  - [ ] 网络中断时本地缓存机制
  - [ ] 数据损坏时的恢复机制
  - [ ] 保存冲突的处理机制

---

## 🎨 用户体验功能测试

### 6.1 性能体验测试

- [ ] **加载性能**
  - [ ] 页面设计器首次加载时间 < 3秒
  - [ ] 组件渲染无白屏或卡顿
  - [ ] 大量组件时加载时间合理
  - [ ] 资源加载优化 (图片、字体等)

- [ ] **操作性能**
  - [ ] 50个组件时操作仍然流畅
  - [ ] 拖拽操作无延迟感
  - [ ] 属性编辑响应及时
  - [ ] 内存使用合理 (<100MB)

### 6.2 无障碍功能测试

- [ ] **键盘导航**
  - [ ] 支持Tab键在界面元素间导航
  - [ ] 支持Enter键确认操作
  - [ ] 支持Esc键取消操作
  - [ ] 焦点管理正确

- [ ] **屏幕阅读器支持**
  - [ ] 关键元素有ARIA标签
  - [ ] 操作状态有语音反馈
  - [ ] 组件类型和属性可被识别
  - [ ] 符合WCAG 2.1 AA标准

- [ ] **视觉辅助**
  - [ ] 颜色对比度符合标准
  - [ ] 字体大小适中
  - [ ] 重要信息不仅依赖颜色表达

### 6.3 错误处理测试

- [ ] **用户友好提示**
  - [ ] 错误信息清晰易懂
  - [ ] 错误提示使用中文
  - [ ] 提供解决建议
  - [ ] 错误不影响其他功能

- [ ] **异常恢复**
  - [ ] 网络错误时的重试机制
  - [ ] 数据加载失败时的降级处理
  - [ ] 组件渲染错误时的容错机制

---

## 🏗️ 系统集成测试

### 7.1 路由导航测试

- [ ] **页面路由**
  - [ ] `/protected/designer/list` 设计器列表页面正常访问
  - [ ] `/protected/designer/create` 创建新页面正常工作
  - [ ] `/protected/designer/page/[id]` 编辑页面正常加载
  - [ ] 页面间导航流畅无卡顿

- [ ] **路由参数**
  - [ ] 页面ID参数正确传递
  - [ ] 无效页面ID的处理
  - [ ] 页面不存在时的提示

### 7.2 API集成测试

- [ ] **API端点响应**
  - [ ] `/api/page-designer/page-designs` 页面设计API正常响应
  - [ ] `/api/page-designer/components` 组件API正常工作
  - [ ] `/api/page-designer/layout` 布局API正常响应
  - [ ] API响应时间合理 (<1秒)

- [ ] **错误处理**
  - [ ] API错误时有用户友好提示
  - [ ] 网络错误时的重试机制
  - [ ] API限流时的处理

### 7.3 认证授权测试

- [ ] **用户认证**
  - [ ] 未登录用户自动跳转到登录页
  - [ ] 登录用户可正常访问设计器功能
  - [ ] 会话过期后正确处理
  - [ ] 权限验证正确执行

---

## 📊 测试结果记录

### 测试总结

- **总测试项**: [统计总数]
- **通过项**: [统计通过数]
- **失败项**: [统计失败数]
- **部分通过项**: [统计部分通过数]
- **通过率**: [计算百分比]

### 关键指标

- **P1功能通过率**: [统计]
- **P2功能通过率**: [统计]
- **P3功能通过率**: [统计]
- **性能指标达标率**: [统计]
- **用户体验评分**: [1-5分]

### 发布建议

- [ ] **发布就绪**: 所有核心功能正常，性能达标
- [ ] **准发布**: 核心功能正常，部分高级功能有小问题
- [ ] **需要修复**: 存在阻塞性问题，修复后可发布
- [ ] **不建议发布**: 存在严重问题，需要重大修复

---

## 📝 问题记录模板

### 问题描述

- **问题ID**: [自动生成]
- **发现时间**: [日期时间]
- **严重程度**: [阻塞性/严重/一般/优化]
- **相关功能**: [对应User Story]
- **复现步骤**: [详细步骤]
- **期望结果**: [预期行为]
- **实际结果**: [实际行为]
- **截图/录屏**: [附件]

### 修复建议

- **建议方案**: [修复建议]
- **优先级**: [高/中/低]
- **指派给**: [开发人员]
- **预计修复时间**: [时间估算]

---

**测试完成！** ✅

请确保完成所有测试项目后，仔细记录发现的问题，并根据测试结果评估是否达到发布标准。
