# ‰Ωé‰ª£Á†ÅÂπ≥Âè∞ÁªÑ‰ª∂Â∫ìÊµãËØïÁ≠ñÁï•‰∏éÊúÄ‰Ω≥ÂÆûË∑µ

## Ê¶ÇËø∞

Êú¨ÊñáÊ°£ËØ¶ÁªÜÊèèËø∞‰∫ÜÂÖ®Ê†à‰Ωé‰ª£Á†ÅÂºÄÂèëÂπ≥Âè∞ÁªÑ‰ª∂Â∫ìÁöÑÊµãËØïÁ≠ñÁï•ÔºåÂåÖÊã¨ÂçïÂÖÉÊµãËØï„ÄÅÈõÜÊàêÊµãËØï„ÄÅE2EÊµãËØï„ÄÅÊÄßËÉΩÊµãËØïÂíåÂèØËÆøÈóÆÊÄßÊµãËØïÁöÑÊúÄ‰Ω≥ÂÆûË∑µ„ÄÇ

## 1. ÊµãËØïÊû∂ÊûÑÊ¶ÇËßà

### 1.1 ÊµãËØïÈáëÂ≠óÂ°î

```
    /\
   /  \     E2E Tests (Â∞ëÈáèÔºåÈ´ò‰ª∑ÂÄº)
  /____\
 /      \   Integration Tests (ÈÄÇÈáèÔºåÂÖ≥ÈîÆÊµÅÁ®ã)
/__________\ Unit Tests (Â§ßÈáèÔºåÂø´ÈÄüÂèçÈ¶à)
```

### 1.2 ÂΩìÂâçÊµãËØïÂ∑•ÂÖ∑Ê†à

- **ÂçïÂÖÉÊµãËØï**: Jest + React Testing Library + @testing-library/user-event
- **ÈõÜÊàêÊµãËØï**: Jest + React Testing Library
- **E2EÊµãËØï**: ÂæÖÂºïÂÖ• Playwright
- **ÊÄßËÉΩÊµãËØï**: ÂæÖÂºïÂÖ• Lighthouse CI
- **ÂèØËÆøÈóÆÊÄßÊµãËØï**: @testing-library/jest-dom + axe-core

## 2. ÂçïÂÖÉÊµãËØïÁ≠ñÁï•

### 2.1 ÊµãËØïË¶ÜÁõñËåÉÂõ¥

#### 2.1.1 ÁªÑ‰ª∂Ê∏≤ÊüìÊµãËØï

- ÁªÑ‰ª∂Âü∫Êú¨Ê∏≤ÊüìÂäüËÉΩ
- Â±ûÊÄß‰º†ÈÄíÂíåÊòæÁ§∫
- ÈªòËÆ§ÂÄºÂ§ÑÁêÜ
- ËæπÁïåÊù°‰ª∂Â§ÑÁêÜ

#### 2.1.2 Â±ûÊÄßÈÖçÁΩÆÊµãËØï

- ÂøÖÈúÄÂ±ûÊÄßÈ™åËØÅ
- ÂèØÈÄâÂ±ûÊÄßÈªòËÆ§ÂÄº
- Â±ûÊÄßÁ±ªÂûãÈ™åËØÅ
- Â±ûÊÄßÂèòÂåñÂìçÂ∫î

#### 2.1.3 ‰∫ã‰ª∂ÂìçÂ∫îÊµãËØï

- ÁÇπÂáª‰∫ã‰ª∂Â§ÑÁêÜ
- ÈîÆÁõò‰∫ã‰ª∂Â§ÑÁêÜ
- Ë°®Âçï‰∫ã‰ª∂Â§ÑÁêÜ
- Ëá™ÂÆö‰πâ‰∫ã‰ª∂Ëß¶Âèë

### 2.2 Âü∫Á°ÄÁªÑ‰ª∂ÂçïÂÖÉÊµãËØïÁ§∫‰æã

#### ButtonÁªÑ‰ª∂ÊµãËØïÁî®‰æã

```typescript
// tests/components/lowcode/page-basic/PageButton.test.tsx
import { describe, test, expect, jest } from '@jest/globals'
import { render, screen, fireEvent } from '@testing-library/react'
import userEvent from '@testing-library/user-event'
import { PageButton } from '@/components/lowcode/page-basic/PageButton'
import { ComponentRendererProps } from '@/types/page-designer/component'

describe('PageButton', () => {
  const defaultProps: ComponentRendererProps = {
    id: 'test-button',
    type: 'button',
    props: {
      button: {
        text: 'ÊµãËØïÊåâÈíÆ',
        variant: 'primary',
        size: 'md',
        disabled: false,
      }
    },
    styles: {},
    events: {},
  }

  describe('Ê∏≤ÊüìÊµãËØï', () => {
    test('Â∫îËØ•Ê≠£Á°ÆÊ∏≤ÊüìÂü∫Á°ÄÊåâÈíÆ', () => {
      render(<PageButton {...defaultProps} />)

      const button = screen.getByRole('button', { name: 'ÊµãËØïÊåâÈíÆ' })
      expect(button).toBeInTheDocument()
      expect(button).toHaveAttribute('data-component-type', 'button')
      expect(button).toHaveAttribute('data-component-id', 'test-button')
    })

    test('Â∫îËØ•ÊîØÊåÅ‰∏çÂêåÁöÑÊåâÈíÆÂèò‰Ωì', () => {
      const variants = ['primary', 'secondary', 'outline', 'ghost', 'link'] as const

      variants.forEach(variant => {
        const props = {
          ...defaultProps,
          props: {
            button: {
              ...defaultProps.props.button!,
              variant
            }
          }
        }

        const { container } = render(<PageButton {...props} />)
        // È™åËØÅ‰∏çÂêåÂèò‰ΩìÁöÑÊ†∑ÂºèÁ±ª
        expect(container.firstChild).toMatchSnapshot()
      })
    })

    test('Â∫îËØ•ÊîØÊåÅ‰∏çÂêåÁöÑÂ∞∫ÂØ∏', () => {
      const sizes = ['sm', 'md', 'lg'] as const

      sizes.forEach(size => {
        const props = {
          ...defaultProps,
          props: {
            button: {
              ...defaultProps.props.button!,
              size
            }
          }
        }

        render(<PageButton {...props} />)
        const button = screen.getByRole('button')
        // È™åËØÅÂ∞∫ÂØ∏Áõ∏ÂÖ≥ÁöÑÊ†∑ÂºèÁ±ª
        expect(button).toBeInTheDocument()
      })
    })

    test('Â∫îËØ•ÊòæÁ§∫ÂõæÊ†á', () => {
      const props = {
        ...defaultProps,
        props: {
          button: {
            ...defaultProps.props.button!,
            icon: 'üöÄ',
            icon_position: 'left'
          }
        }
      }

      render(<PageButton {...props} />)
      const button = screen.getByRole('button')
      expect(button).toHaveTextContent('üöÄÊµãËØïÊåâÈíÆ')
    })

    test('Â∫îËØ•ÊîØÊåÅÂä†ËΩΩÁä∂ÊÄÅ', () => {
      const props = {
        ...defaultProps,
        props: {
          button: {
            ...defaultProps.props.button!,
            loading: true
          }
        }
      }

      render(<PageButton {...props} />)
      const spinner = screen.getByRole('status') || document.querySelector('.animate-spin')
      expect(spinner).toBeInTheDocument()
    })

    test('Â∫îËØ•Ê≠£Á°ÆÂ§ÑÁêÜÁ¶ÅÁî®Áä∂ÊÄÅ', () => {
      const props = {
        ...defaultProps,
        props: {
          button: {
            ...defaultProps.props.button!,
            disabled: true
          }
        }
      }

      render(<PageButton {...props} />)
      const button = screen.getByRole('button')
      expect(button).toBeDisabled()
    })
  })

  describe('‰∫ã‰ª∂Â§ÑÁêÜÊµãËØï', () => {
    test('Â∫îËØ•Â§ÑÁêÜÁÇπÂáª‰∫ã‰ª∂', async () => {
      const mockOnSelect = jest.fn()
      const user = userEvent.setup()

      const props = {
        ...defaultProps,
        onSelect: mockOnSelect
      }

      render(<PageButton {...props} />)
      const button = screen.getByRole('button')

      await user.click(button)
      expect(mockOnSelect).toHaveBeenCalledWith('test-button')
    })

    test('Â∫îËØ•Â§ÑÁêÜÂèåÂáª‰∫ã‰ª∂', async () => {
      const user = userEvent.setup()

      render(<PageButton {...defaultProps} />)
      const button = screen.getByRole('button')

      await user.dblClick(button)
      // È™åËØÅÂèåÂáªË°å‰∏∫ÔºåÂèØËÉΩËß¶ÂèëÁºñËæëÊ®°Âºè
    })

    test('Â∫îËØ•Â§ÑÁêÜÈîÆÁõò‰∫ã‰ª∂', async () => {
      const mockOnDelete = jest.fn()
      const user = userEvent.setup()

      const props = {
        ...defaultProps,
        onDelete: mockOnDelete,
        isSelected: true
      }

      render(<PageButton {...props} />)
      const button = screen.getByRole('button')

      button.focus()
      await user.keyboard('{Delete}')
      expect(mockOnDelete).toHaveBeenCalledWith('test-button')
    })
  })

  describe('Ê†∑ÂºèÊµãËØï', () => {
    test('Â∫îËØ•Â∫îÁî®Ëá™ÂÆö‰πâÊ†∑Âºè', () => {
      const props = {
        ...defaultProps,
        styles: {
          width: '200px',
          height: '50px',
          backgroundColor: '#ff0000',
          borderRadius: '8px'
        }
      }

      render(<PageButton {...props} />)
      const button = screen.getByRole('button')

      expect(button).toHaveStyle({
        width: '200px',
        height: '50px',
        backgroundColor: '#ff0000'
      })
    })

    test('Â∫îËØ•ÊòæÁ§∫ÈÄâ‰∏≠Áä∂ÊÄÅ', () => {
      const props = {
        ...defaultProps,
        isSelected: true
      }

      render(<PageButton {...props} />)
      const button = screen.getByRole('button')
      expect(button).toHaveClass('ring-2', 'ring-blue-500')
    })

    test('Â∫îËØ•ÊòæÁ§∫ÊãñÊãΩÁä∂ÊÄÅ', () => {
      const props = {
        ...defaultProps,
        isDragging: true
      }

      render(<PageButton {...props} />)
      const button = screen.getByRole('button')
      expect(button).toHaveClass('opacity-75')
    })
  })

  describe('ÂèØËÆøÈóÆÊÄßÊµãËØï', () => {
    test('Â∫îËØ•ÊúâÊ≠£Á°ÆÁöÑARIAÊ†áÁ≠æ', () => {
      render(<PageButton {...defaultProps} />)
      const button = screen.getByRole('button', { name: 'ÊµãËØïÊåâÈíÆ' })
      expect(button).toHaveAttribute('aria-label', 'ÊµãËØïÊåâÈíÆ')
    })

    test('Â∫îËØ•ÊîØÊåÅÈîÆÁõòÂØºËà™', async () => {
      const user = userEvent.setup()

      render(<PageButton {...defaultProps} />)
      const button = screen.getByRole('button')

      button.focus()
      expect(button).toHaveFocus()

      await user.keyboard('{Enter}')
      // È™åËØÅEnterÈîÆËß¶ÂèëÁÇπÂáª‰∫ã‰ª∂

      await user.keyboard(' ')
      // È™åËØÅÁ©∫Ê†ºÈîÆËß¶ÂèëÁÇπÂáª‰∫ã‰ª∂
    })
  })
})
```

#### InputÁªÑ‰ª∂ÊµãËØïÁî®‰æã

```typescript
// tests/components/lowcode/page-basic/PageInput.test.tsx
import { describe, test, expect, jest } from '@jest/globals'
import { render, screen, fireEvent } from '@testing-library/react'
import userEvent from '@testing-library/user-event'
import { PageInput } from '@/components/lowcode/page-basic/PageInput'

describe('PageInput', () => {
  const defaultProps = {
    id: 'test-input',
    type: 'input',
    props: {
      input: {
        type: 'text',
        placeholder: 'ËØ∑ËæìÂÖ•ÂÜÖÂÆπ',
        value: '',
        required: false,
        disabled: false,
        readOnly: false,
      }
    },
    styles: {},
    events: {},
  }

  describe('Âü∫Á°ÄÊ∏≤Êüì', () => {
    test('Â∫îËØ•Ê∏≤ÊüìËæìÂÖ•Ê°Ü', () => {
      render(<PageInput {...defaultProps} />)

      const input = screen.getByPlaceholderText('ËØ∑ËæìÂÖ•ÂÜÖÂÆπ')
      expect(input).toBeInTheDocument()
      expect(input).toHaveAttribute('type', 'text')
    })

    test('Â∫îËØ•ÊîØÊåÅ‰∏çÂêåÁöÑËæìÂÖ•Á±ªÂûã', () => {
      const types = ['text', 'email', 'password', 'number', 'tel', 'url'] as const

      types.forEach(type => {
        const props = {
          ...defaultProps,
          props: {
            input: {
              ...defaultProps.props.input!,
              type
            }
          }
        }

        render(<PageInput {...props} />)
        const input = screen.getByDisplayValue('')
        expect(input).toHaveAttribute('type', type)
      })
    })
  })

  describe('ËæìÂÖ•È™åËØÅ', () => {
    test('Â∫îËØ•È™åËØÅÂøÖÂ°´Â≠óÊÆµ', async () => {
      const props = {
        ...defaultProps,
        props: {
          input: {
            ...defaultProps.props.input!,
            required: true,
            label: 'Áî®Êà∑Âêç'
          }
        }
      }

      render(<PageInput {...props} />)
      const input = screen.getByLabelText('Áî®Êà∑Âêç')

      // ÊµãËØïÂøÖÂ°´È™åËØÅ
      await userEvent.type(input, 'test')
      await userEvent.clear(input)

      expect(input).toBeInvalid()
    })

    test('Â∫îËØ•È™åËØÅÊúÄÂ§ßÈïøÂ∫¶', async () => {
      const props = {
        ...defaultProps,
        props: {
          input: {
            ...defaultProps.props.input!,
            maxlength: 5
          }
        }
      }

      render(<PageInput {...props} />)
      const input = screen.getByPlaceholderText('ËØ∑ËæìÂÖ•ÂÜÖÂÆπ')

      await userEvent.type(input, '123456789')
      expect(input).toHaveValue('12345')
    })

    test('Â∫îËØ•È™åËØÅÊ®°ÂºèÂåπÈÖç', async () => {
      const props = {
        ...defaultProps,
        props: {
          input: {
            ...defaultProps.props.input!,
            pattern: '[a-z]+',
            label: 'Â∞èÂÜôÂ≠óÊØç'
          }
        }
      }

      render(<PageInput {...props} />)
      const input = screen.getByLabelText('Â∞èÂÜôÂ≠óÊØç')

      await userEvent.type(input, 'ABC')
      expect(input).toBeInvalid()

      await userEvent.clear(input)
      await userEvent.type(input, 'abc')
      expect(input).toBeValid()
    })
  })
})
```

### 2.3 Â∏ÉÂ±ÄÁªÑ‰ª∂ÊµãËØï

#### ContainerÁªÑ‰ª∂ÊµãËØï

```typescript
// tests/components/lowcode/page-layout/Container.test.tsx
describe('Container', () => {
  describe('Â∏ÉÂ±ÄÂäüËÉΩ', () => {
    test('Â∫îËØ•ÊîØÊåÅflexÂ∏ÉÂ±Ä', () => {
      const props = {
        ...defaultProps,
        props: {
          container: {
            direction: 'row',
            wrap: true,
            justify: 'center',
            align: 'center',
            gap: 16
          }
        }
      }

      render(<Container {...props} />)
      const container = screen.getByTestId('container')

      expect(container).toHaveStyle({
        display: 'flex',
        flexDirection: 'row',
        flexWrap: 'wrap',
        justifyContent: 'center',
        alignItems: 'center',
        gap: '16px'
      })
    })

    test('Â∫îËØ•ÊîØÊåÅÂìçÂ∫îÂºèÈó¥Ë∑ù', () => {
      const props = {
        ...defaultProps,
        props: {
          container: {
            padding: { xs: 8, md: 16, lg: 24 },
            margin: { top: 16, bottom: 16 }
          }
        }
      }

      render(<Container {...props} />)
      // È™åËØÅÂìçÂ∫îÂºèÊ†∑ÂºèÂ∫îÁî®
    })
  })

  describe('Â≠êÁªÑ‰ª∂Ê∏≤Êüì', () => {
    test('Â∫îËØ•Ê≠£Á°ÆÊ∏≤ÊüìÂ≠êÁªÑ‰ª∂', () => {
      const children = [
        { type: 'button', id: 'btn1', props: { button: { text: 'ÊåâÈíÆ1' } } },
        { type: 'input', id: 'input1', props: { input: { placeholder: 'ËæìÂÖ•Ê°Ü' } } }
      ]

      render(
        <Container {...defaultProps}>
          {children.map(child => (
            <ComponentRenderer key={child.id} component={child} />
          ))}
        </Container>
      )

      expect(screen.getByText('ÊåâÈíÆ1')).toBeInTheDocument()
      expect(screen.getByPlaceholderText('ËæìÂÖ•Ê°Ü')).toBeInTheDocument()
    })
  })
})
```

### 2.4 ÊµãËØïÂ∑•ÂÖ∑ÂáΩÊï∞

#### ÁªÑ‰ª∂ÊµãËØïÂ∑•ÂÖ∑

```typescript
// tests/utils/component-test-utils.tsx
import { ReactElement } from 'react'
import { render, RenderOptions } from '@testing-library/react'
import { ThemeProvider } from 'next-themes'
import { ComponentRendererProps } from '@/types/page-designer/component'

// Ëá™ÂÆö‰πâÊ∏≤ÊüìÂô®ÔºåÂåÖÂê´‰∏ªÈ¢òÊèê‰æõËÄÖ
const AllTheProviders: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  return (
    <ThemeProvider attribute="class" defaultTheme="light">
      {children}
    </ThemeProvider>
  )
}

const customRender = (
  ui: ReactElement,
  options?: Omit<RenderOptions, 'wrapper'>
) => render(ui, { wrapper: AllTheProviders, ...options })

// ÂàõÂª∫Ê®°ÊãüÁªÑ‰ª∂Â±ûÊÄß
export const createMockComponentProps = (
  overrides: Partial<ComponentRendererProps> = {}
): ComponentRendererProps => ({
  id: 'test-component',
  type: 'button',
  props: {},
  styles: {},
  events: {},
  ...overrides
})

// Ê®°ÊãüÊãñÊãΩ‰∫ã‰ª∂
export const createDragEvent = (type: string) => {
  const event = new Event(type, { bubbles: true })
  Object.defineProperty(event, 'dataTransfer', {
    value: {
      setData: jest.fn(),
      getData: jest.fn(),
    },
  })
  return event
}

// Á≠âÂæÖÂºÇÊ≠•Êìç‰ΩúÂÆåÊàê
export const waitForAsync = () => new Promise(resolve => setTimeout(resolve, 0))

export * from '@testing-library/react'
export { customRender as render }
```

## 3. ÈõÜÊàêÊµãËØïÁ≠ñÁï•

### 3.1 ÁªÑ‰ª∂Èó¥‰∫§‰∫íÊµãËØï

#### ÊãñÊãΩÊìç‰ΩúÈõÜÊàêÊµãËØï

```typescript
// tests/integration/drag-drop.test.tsx
import { describe, test, expect, jest } from '@jest/globals'
import { render, screen, fireEvent, waitFor } from '@testing-library/react'
import userEvent from '@testing-library/user-event'
import { ComponentPanel } from '@/components/designer/ComponentPanel'
import { Canvas } from '@/components/designer/Canvas'
import { DragProvider } from '@/contexts/DragContext'

describe('ÊãñÊãΩÊìç‰ΩúÈõÜÊàêÊµãËØï', () => {
  test('Â∫îËØ•ËÉΩÂ§ü‰ªéÁªÑ‰ª∂Èù¢ÊùøÊãñÊãΩÁªÑ‰ª∂Âà∞ÁîªÂ∏É', async () => {
    const user = userEvent.setup()
    const mockOnDrop = jest.fn()

    render(
      <DragProvider onDrop={mockOnDrop}>
        <div>
          <ComponentPanel />
          <Canvas />
        </div>
      </DragProvider>
    )

    // Êü•ÊâæÊåâÈíÆÁªÑ‰ª∂
    const buttonComponent = screen.getByText('ÊåâÈíÆ')

    // ÂºÄÂßãÊãñÊãΩ
    fireEvent.dragStart(buttonComponent)

    // Êü•ÊâæÁîªÂ∏ÉÊãñÊãΩÂå∫Âüü
    const canvasDropZone = screen.getByTestId('canvas-drop-zone')

    // ÊãñÊãΩÂà∞ÁîªÂ∏É
    fireEvent.dragOver(canvasDropZone)
    fireEvent.drop(canvasDropZone)

    // È™åËØÅÊãñÊãΩÁªìÊûú
    await waitFor(() => {
      expect(mockOnDrop).toHaveBeenCalledWith(
        expect.objectContaining({
          type: 'button',
          isFromPanel: true
        }),
        expect.objectContaining({
          targetId: 'canvas'
        })
      )
    })
  })

  test('Â∫îËØ•ËÉΩÂ§üÈáçÊñ∞ÊéíÂàóÁîªÂ∏É‰∏≠ÁöÑÁªÑ‰ª∂', async () => {
    const user = userEvent.setup()

    render(
      <DragProvider>
        <Canvas>
          <div data-testid="component-1">ÁªÑ‰ª∂1</div>
          <div data-testid="component-2">ÁªÑ‰ª∂2</div>
        </Canvas>
      </DragProvider>
    )

    const component1 = screen.getByTestId('component-1')
    const component2 = screen.getByTestId('component-2')

    // ÊãñÊãΩÁªÑ‰ª∂1Âà∞ÁªÑ‰ª∂2‰ΩçÁΩÆ
    fireEvent.dragStart(component1)
    fireEvent.dragOver(component2)
    fireEvent.drop(component2)

    // È™åËØÅÁªÑ‰ª∂È°∫Â∫èÂ∑≤ÊîπÂèò
    expect(component2.nextSibling).toBe(component1)
  })
})
```

#### Â±ûÊÄßÈù¢ÊùøÈõÜÊàêÊµãËØï

```typescript
// tests/integration/properties-panel.test.tsx
import { describe, test, expect, jest } from '@jest/globals'
import { render, screen, fireEvent, waitFor } from '@testing-library/react'
import userEvent from '@testing-library/user-event'
import { PropertiesPanel } from '@/components/designer/PropertiesPanel'
import { ComponentProvider } from '@/contexts/ComponentContext'

describe('Â±ûÊÄßÈù¢ÊùøÈõÜÊàêÊµãËØï', () => {
  const mockComponent = {
    id: 'test-button',
    type: 'button',
    props: {
      button: {
        text: 'ÂéüÂßãÊñáÊú¨',
        variant: 'primary',
        size: 'md'
      }
    },
    styles: {}
  }

  test('Â∫îËØ•ËÉΩÂ§ü‰øÆÊîπÁªÑ‰ª∂Â±ûÊÄß', async () => {
    const user = userEvent.setup()
    const mockOnUpdate = jest.fn()

    render(
      <ComponentProvider>
        <PropertiesPanel
          selectedComponent={mockComponent}
          onUpdate={mockOnUpdate}
        />
      </ComponentProvider>
    )

    // ‰øÆÊîπÊåâÈíÆÊñáÊú¨
    const textInput = screen.getByLabelText('ÊåâÈíÆÊñáÊú¨')
    await user.clear(textInput)
    await user.type(textInput, 'Êñ∞ÊñáÊú¨')

    // ‰øÆÊîπÊåâÈíÆÂèò‰Ωì
    const variantSelect = screen.getByLabelText('ÊåâÈíÆÊ†∑Âºè')
    await user.selectOptions(variantSelect, 'secondary')

    // È™åËØÅÊõ¥Êñ∞ÂõûË∞É
    await waitFor(() => {
      expect(mockOnUpdate).toHaveBeenCalledWith('test-button', {
        props: {
          button: {
            text: 'Êñ∞ÊñáÊú¨',
            variant: 'secondary',
            size: 'md'
          }
        }
      })
    })
  })

  test('Â∫îËØ•ÂÆûÊó∂È¢ÑËßàÊ†∑ÂºèÂèòÂåñ', async () => {
    const user = userEvent.setup()

    render(
      <ComponentProvider>
        <PropertiesPanel selectedComponent={mockComponent} />
      </ComponentProvider>
    )

    // ‰øÆÊîπËÉåÊôØÈ¢úËâ≤
    const colorInput = screen.getByLabelText('ËÉåÊôØÈ¢úËâ≤')
    await user.type(colorInput, '#ff0000')

    // È™åËØÅÈ¢ÑËßàÁªÑ‰ª∂Ê†∑ÂºèÂ∑≤Êõ¥Êñ∞
    const previewComponent = screen.getByTestId('component-preview')
    expect(previewComponent).toHaveStyle({
      backgroundColor: '#ff0000'
    })
  })
})
```

### 3.2 Áä∂ÊÄÅÁÆ°ÁêÜÈõÜÊàêÊµãËØï

```typescript
// tests/integration/state-management.test.tsx
import { describe, test, expect, jest } from '@jest/globals'
import { renderHook, act } from '@testing-library/react'
import { useDesignerStore } from '@/stores/designer'

describe('Áä∂ÊÄÅÁÆ°ÁêÜÈõÜÊàêÊµãËØï', () => {
  test('Â∫îËØ•Ê≠£Á°ÆÁÆ°ÁêÜÁªÑ‰ª∂ÂàóË°®', () => {
    const { result } = renderHook(() => useDesignerStore())

    // ÂàùÂßãÁä∂ÊÄÅ
    expect(result.current.components).toEqual({})

    // Ê∑ªÂä†ÁªÑ‰ª∂
    const component = {
      id: 'btn-1',
      type: 'button',
      props: { button: { text: 'ÊåâÈíÆ' } },
      styles: {},
    }

    act(() => {
      result.current.addComponent(component)
    })

    expect(result.current.components['btn-1']).toEqual(component)

    // Êõ¥Êñ∞ÁªÑ‰ª∂
    act(() => {
      result.current.updateComponent('btn-1', {
        props: { button: { text: 'Êõ¥Êñ∞ÁöÑÊåâÈíÆ' } },
      })
    })

    expect(result.current.components['btn-1'].props.button.text).toBe('Êõ¥Êñ∞ÁöÑÊåâÈíÆ')

    // Âà†Èô§ÁªÑ‰ª∂
    act(() => {
      result.current.deleteComponent('btn-1')
    })

    expect(result.current.components['btn-1']).toBeUndefined()
  })

  test('Â∫îËØ•Ê≠£Á°ÆÁÆ°ÁêÜÈÄâ‰∏≠Áä∂ÊÄÅ', () => {
    const { result } = renderHook(() => useDesignerStore())

    // ÈÄâÊã©ÁªÑ‰ª∂
    act(() => {
      result.current.selectComponent('btn-1')
    })

    expect(result.current.selectedComponentId).toBe('btn-1')

    // Ê∏ÖÈô§ÈÄâÊã©
    act(() => {
      result.current.clearSelection()
    })

    expect(result.current.selectedComponentId).toBeNull()
  })
})
```

## 4. E2EÊµãËØïÁ≠ñÁï•

### 4.1 PlaywrightÈÖçÁΩÆ

#### ÂÆâË£ÖÂíåÈÖçÁΩÆ

```bash
# ÂÆâË£Ö Playwright
pnpm add -D @playwright/test

# ÂÆâË£ÖÊµèËßàÂô®
pnpm exec playwright install
```

#### playwright.config.ts

```typescript
import { defineConfig, devices } from '@playwright/test'

export default defineConfig({
  testDir: './tests/e2e',
  timeout: 30 * 1000,
  expect: {
    timeout: 5000,
  },
  fullyParallel: true,
  forbidOnly: !!process.env.CI,
  retries: process.env.CI ? 2 : 0,
  workers: process.env.CI ? 1 : undefined,
  reporter: 'html',
  use: {
    baseURL: 'http://localhost:3000',
    trace: 'on-first-retry',
    screenshot: 'only-on-failure',
    video: 'retain-on-failure',
  },
  projects: [
    {
      name: 'chromium',
      use: { ...devices['Desktop Chrome'] },
    },
    {
      name: 'firefox',
      use: { ...devices['Desktop Firefox'] },
    },
    {
      name: 'webkit',
      use: { ...devices['Desktop Safari'] },
    },
    {
      name: 'Mobile Chrome',
      use: { ...devices['Pixel 5'] },
    },
  ],
  webServer: {
    command: 'pnpm dev',
    url: 'http://localhost:3000',
    reuseExistingServer: !process.env.CI,
  },
})
```

### 4.2 E2EÊµãËØïÁî®‰æã

#### ÂÆåÊï¥È°µÈù¢ËÆæËÆ°ÊµÅÁ®ãÊµãËØï

```typescript
// tests/e2e/page-design-workflow.spec.ts
import { test, expect } from '@playwright/test'

test.describe('È°µÈù¢ËÆæËÆ°Â∑•‰ΩúÊµÅÁ®ã', () => {
  test.beforeEach(async ({ page }) => {
    // ÁôªÂΩï
    await page.goto('/auth/login')
    await page.fill('[data-testid="email-input"]', 'test@example.com')
    await page.fill('[data-testid="password-input"]', 'password123')
    await page.click('[data-testid="login-button"]')

    // ÂØºËà™Âà∞È°µÈù¢ËÆæËÆ°Âô®
    await page.goto('/protected/designer')
    await page.waitForLoadState('networkidle')
  })

  test('ÂÆåÊï¥ÁöÑÈ°µÈù¢ËÆæËÆ°ÊµÅÁ®ã', async ({ page }) => {
    // 1. ÂàõÂª∫Êñ∞È°µÈù¢
    await page.click('[data-testid="new-page-button"]')
    await page.fill('[data-testid="page-name-input"]', 'ÊµãËØïÈ°µÈù¢')
    await page.click('[data-testid="create-page-button"]')

    // 2. ÊãñÊãΩÁªÑ‰ª∂Âà∞ÁîªÂ∏É
    await page.dragAndDrop('[data-testid="component-button"]', '[data-testid="canvas-drop-zone"]')

    // 3. ÈÄâÊã©Âπ∂ÈÖçÁΩÆÁªÑ‰ª∂
    await page.click('[data-component-id="button-1"]')
    await page.fill('[data-testid="button-text-input"]', 'ÁÇπÂáªÊàë')
    await page.selectOption('[data-testid="button-variant-select"]', 'primary')

    // 4. Ê∑ªÂä†Êõ¥Â§öÁªÑ‰ª∂
    await page.dragAndDrop('[data-testid="component-input"]', '[data-testid="canvas-drop-zone"]')

    // 5. ÈÖçÁΩÆËæìÂÖ•Ê°Ü
    await page.click('[data-component-id="input-1"]')
    await page.fill('[data-testid="input-placeholder-input"]', 'ËØ∑ËæìÂÖ•ÂßìÂêç')

    // 6. È¢ÑËßàÈ°µÈù¢
    await page.click('[data-testid="preview-button"]')
    await page.waitForSelector('[data-testid="preview-mode"]')

    // 7. È™åËØÅÈ¢ÑËßàÂÜÖÂÆπ
    await expect(page.locator('button:has-text("ÁÇπÂáªÊàë")')).toBeVisible()
    await expect(page.locator('input[placeholder="ËØ∑ËæìÂÖ•ÂßìÂêç"]')).toBeVisible()

    // 8. ËøîÂõûÁºñËæëÊ®°Âºè
    await page.click('[data-testid="edit-button"]')

    // 9. ‰øùÂ≠òÈ°µÈù¢
    await page.click('[data-testid="save-button"]')
    await expect(page.locator('[data-testid="save-success-message"]')).toBeVisible()
  })

  test('ÁªÑ‰ª∂ÊãñÊãΩÂíåÂÆö‰Ωç', async ({ page }) => {
    // ÊãñÊãΩÊåâÈíÆÂà∞ÁîªÂ∏É
    await page.dragAndDrop('[data-testid="component-button"]', '[data-testid="canvas-drop-zone"]')

    // È™åËØÅÁªÑ‰ª∂Â∑≤Ê∑ªÂä†Âà∞ÁîªÂ∏É
    const button = page.locator('[data-component-id="button-1"]')
    await expect(button).toBeVisible()

    // ÊµãËØïÁªÑ‰ª∂ÂÆö‰Ωç
    const boundingBox = await button.boundingBox()
    expect(boundingBox).toBeTruthy()
    expect(boundingBox!.x).toBeGreaterThan(0)
    expect(boundingBox!.y).toBeGreaterThan(0)

    // ÊµãËØïÁªÑ‰ª∂ÁßªÂä®
    await button.hover()
    await page.mouse.down()
    await page.mouse.move(boundingBox!.x + 100, boundingBox!.y + 50)
    await page.mouse.up()

    // È™åËØÅÊñ∞‰ΩçÁΩÆ
    const newBoundingBox = await button.boundingBox()
    expect(newBoundingBox!.x).toBeGreaterThan(boundingBox!.x)
    expect(newBoundingBox!.y).toBeGreaterThan(boundingBox!.y)
  })

  test('Â±ûÊÄßÈù¢ÊùøÈÖçÁΩÆ', async ({ page }) => {
    // Ê∑ªÂä†ÁªÑ‰ª∂
    await page.dragAndDrop('[data-testid="component-button"]', '[data-testid="canvas-drop-zone"]')

    // ÈÄâÊã©ÁªÑ‰ª∂
    await page.click('[data-component-id="button-1"]')

    // Á≠âÂæÖÂ±ûÊÄßÈù¢ÊùøÂä†ËΩΩ
    await page.waitForSelector('[data-testid="properties-panel"]')

    // ÈÖçÁΩÆÊñáÊú¨
    await page.fill('[data-testid="button-text-input"]', 'Âä®ÊÄÅÊåâÈíÆ')
    await expect(page.locator('[data-component-id="button-1"]')).toContainText('Âä®ÊÄÅÊåâÈíÆ')

    // ÈÖçÁΩÆÊ†∑Âºè
    await page.click('[data-testid="styles-tab"]')
    await page.fill('[data-testid="width-input"]', '200px')
    await page.fill('[data-testid="height-input"]', '60px')

    // È™åËØÅÊ†∑ÂºèÂ∫îÁî®
    const button = page.locator('[data-component-id="button-1"]')
    await expect(button).toHaveCSS('width', '200px')
    await expect(button).toHaveCSS('height', '60px')

    // ÈÖçÁΩÆ‰∫ã‰ª∂
    await page.click('[data-testid="events-tab"]')
    await page.click('[data-testid="add-event-button"]')
    await page.selectOption('[data-testid="event-type-select"]', 'click')
    await page.selectOption('[data-testid="event-action-select"]', 'navigate')
    await page.fill('[data-testid="event-target-input"]', '/about')

    // È™åËØÅ‰∫ã‰ª∂ÈÖçÁΩÆ
    await expect(page.locator('[data-testid="event-list"]')).toContainText(
      'click ‚Üí navigate ‚Üí /about'
    )
  })

  test('ÂìçÂ∫îÂºèËÆæËÆ°', async ({ page }) => {
    // Ê∑ªÂä†ÂÆπÂô®ÂíåÁªÑ‰ª∂
    await page.dragAndDrop(
      '[data-testid="component-container"]',
      '[data-testid="canvas-drop-zone"]'
    )

    await page.dragAndDrop('[data-testid="component-button"]', '[data-component-id="container-1"]')

    // ÈÖçÁΩÆÊ°åÈù¢ËßÜÂõæ
    await page.selectOption('[data-testid="viewport-select"]', 'desktop')
    await page.click('[data-component-id="button-1"]')
    await page.fill('[data-testid="width-input"]', '300px')

    // ÈÖçÁΩÆÂπ≥ÊùøËßÜÂõæ
    await page.selectOption('[data-testid="viewport-select"]', 'tablet')
    await page.fill('[data-testid="width-input"]', '200px')

    // ÈÖçÁΩÆÊâãÊú∫ËßÜÂõæ
    await page.selectOption('[data-testid="viewport-select"]', 'mobile')
    await page.fill('[data-testid="width-input"]', '100%')

    // È™åËØÅÂìçÂ∫îÂºèÈ¢ÑËßà
    await page.click('[data-testid="preview-button"]')

    // ÊµãËØï‰∏çÂêåËßÜÂè£Â∞∫ÂØ∏
    await page.setViewportSize({ width: 1200, height: 800 })
    await expect(page.locator('[data-component-id="button-1"]')).toHaveCSS('width', '300px')

    await page.setViewportSize({ width: 768, height: 1024 })
    await expect(page.locator('[data-component-id="button-1"]')).toHaveCSS('width', '200px')

    await page.setViewportSize({ width: 375, height: 667 })
    await expect(page.locator('[data-component-id="button-1"]')).toHaveCSS('width', '100%')
  })
})
```

#### ÊÄßËÉΩÊµãËØïÁî®‰æã

```typescript
// tests/e2e/performance.spec.ts
import { test, expect } from '@playwright/test'

test.describe('ÊÄßËÉΩÊµãËØï', () => {
  test('È°µÈù¢Âä†ËΩΩÊÄßËÉΩ', async ({ page }) => {
    const startTime = Date.now()

    await page.goto('/protected/designer')
    await page.waitForLoadState('networkidle')

    const loadTime = Date.now() - startTime
    expect(loadTime).toBeLessThan(3000) // È°µÈù¢Â∫îÂú®3ÁßíÂÜÖÂä†ËΩΩÂÆåÊàê

    // Ê£ÄÊü•ÊÄßËÉΩÊåáÊ†á
    const metrics = await page.evaluate(() => {
      const navigation = performance.getEntriesByType(
        'navigation'
      )[0] as PerformanceNavigationTiming
      return {
        domContentLoaded:
          navigation.domContentLoadedEventEnd - navigation.domContentLoadedEventStart,
        loadComplete: navigation.loadEventEnd - navigation.loadEventStart,
        firstPaint: performance.getEntriesByType('paint')[0]?.startTime,
        firstContentfulPaint: performance.getEntriesByType('paint')[1]?.startTime,
      }
    })

    expect(metrics.domContentLoaded).toBeLessThan(1500)
    expect(metrics.loadComplete).toBeLessThan(3000)
    expect(metrics.firstContentfulPaint).toBeLessThan(1000)
  })

  test('Â§ßÈáèÁªÑ‰ª∂Ê∏≤ÊüìÊÄßËÉΩ', async ({ page }) => {
    await page.goto('/protected/designer')

    // Ê∑ªÂä†Â§ßÈáèÁªÑ‰ª∂
    for (let i = 0; i < 100; i++) {
      await page.dragAndDrop('[data-testid="component-button"]', '[data-testid="canvas-drop-zone"]')
    }

    // ÊµãÈáèÊ∏≤ÊüìÊó∂Èó¥
    const renderStartTime = Date.now()
    await page.waitForSelector('[data-component-id="button-100"]')
    const renderTime = Date.now() - renderStartTime

    expect(renderTime).toBeLessThan(5000) // 100‰∏™ÁªÑ‰ª∂Â∫îÂú®5ÁßíÂÜÖÊ∏≤ÊüìÂÆåÊàê

    // ÊµãËØïÊãñÊãΩÊÄßËÉΩ
    const dragStartTime = Date.now()
    await page.dragAndDrop('[data-component-id="button-1"]', '[data-testid="canvas-drop-zone"]')
    const dragTime = Date.now() - dragStartTime

    expect(dragTime).toBeLessThan(1000) // ÊãñÊãΩÂìçÂ∫îÂ∫îÂú®1ÁßíÂÜÖ
  })

  test('ÂÜÖÂ≠ò‰ΩøÁî®ÊµãËØï', async ({ page }) => {
    await page.goto('/protected/designer')

    // Ëé∑ÂèñÂàùÂßãÂÜÖÂ≠ò‰ΩøÁî®
    const initialMemory = await page.evaluate(() => {
      return (performance as any).memory?.usedJSHeapSize || 0
    })

    // ÊâßË°å‰∏ÄÁ≥ªÂàóÊìç‰Ωú
    for (let i = 0; i < 50; i++) {
      await page.dragAndDrop('[data-testid="component-button"]', '[data-testid="canvas-drop-zone"]')
      await page.click(`[data-component-id="button-${i + 1}"]`)
      await page.click('[data-testid="preview-button"]')
      await page.click('[data-testid="edit-button"]')
    }

    // Âº∫Âà∂ÂûÉÂúæÂõûÊî∂
    await page.evaluate(() => {
      if (window.gc) {
        window.gc()
      }
    })

    // Ê£ÄÊü•ÂÜÖÂ≠òÂ¢ûÈïø
    const finalMemory = await page.evaluate(() => {
      return (performance as any).memory?.usedJSHeapSize || 0
    })

    const memoryGrowth = finalMemory - initialMemory
    const memoryGrowthMB = memoryGrowth / 1024 / 1024

    expect(memoryGrowthMB).toBeLessThan(50) // ÂÜÖÂ≠òÂ¢ûÈïøÂ∫îÂ∞è‰∫é50MB
  })
})
```

#### ÂèØËÆøÈóÆÊÄßÊµãËØïÁî®‰æã

```typescript
// tests/e2e/accessibility.spec.ts
import { test, expect } from '@playwright/test'
import { injectAxe, checkA11y } from 'axe-playwright'

test.describe('ÂèØËÆøÈóÆÊÄßÊµãËØï', () => {
  test.beforeEach(async ({ page }) => {
    await page.goto('/protected/designer')
    await injectAxe(page)
  })

  test('Âü∫Á°ÄÂèØËÆøÈóÆÊÄßÊ£ÄÊü•', async ({ page }) => {
    await checkA11y(page, null, {
      detailedReport: true,
      detailedReportOptions: { html: true },
      rules: {
        // ÂÖÅËÆ∏ÁöÑÈ¢úËâ≤ÂØπÊØîÂ∫¶Ë≠¶ÂëäÔºàÂõ†‰∏∫ËøôÊòØËÆæËÆ°Â∑•ÂÖ∑Ôºâ
        'color-contrast': { enabled: false },
        // ÂÖÅËÆ∏ÁöÑË∑≥ËøáÈìæÊé•Ë≠¶Âëä
        'skip-link': { enabled: false },
      },
    })
  })

  test('ÈîÆÁõòÂØºËà™ÊµãËØï', async ({ page }) => {
    // ÊµãËØïTabÈîÆÂØºËà™
    await page.keyboard.press('Tab')
    let focused = await page.locator(':focus')
    await expect(focused).toBeVisible()

    // ÁªßÁª≠TabÂØºËà™Âà∞ÂêÑ‰∏™ÂÖÉÁ¥†
    for (let i = 0; i < 10; i++) {
      await page.keyboard.press('Tab')
      focused = await page.locator(':focus')
      await expect(focused).toBeVisible()
    }

    // ÊµãËØïShift+TabÂèçÂêëÂØºËà™
    for (let i = 0; i < 5; i++) {
      await page.keyboard.press('Shift+Tab')
      focused = await page.locator(':focus')
      await expect(focused).toBeVisible()
    }

    // ÊµãËØïEnterÈîÆÊøÄÊ¥ª
    await page.keyboard.press('Enter')

    // ÊµãËØïÁ©∫Ê†ºÈîÆÊøÄÊ¥ª
    await page.keyboard.press('Space')
  })

  test('Â±èÂπïÈòÖËØªÂô®ÊîØÊåÅ', async ({ page }) => {
    // Ê∑ªÂä†‰∏Ä‰∏™ÊåâÈíÆÁªÑ‰ª∂
    await page.dragAndDrop('[data-testid="component-button"]', '[data-testid="canvas-drop-zone"]')

    // Ê£ÄÊü•ARIAÊ†áÁ≠æ
    const button = page.locator('[data-component-id="button-1"]')
    await expect(button).toHaveAttribute('role', 'button')
    await expect(button).toHaveAttribute('aria-label')

    // Ê£ÄÊü•ÁªÑ‰ª∂ÁªìÊûÑÁöÑËØ≠‰πâÂåñ
    const main = page.locator('main')
    await expect(main).toBeVisible()

    const navigation = page.locator('nav')
    await expect(navigation).toBeVisible()
  })

  test('ÁÑ¶ÁÇπÁÆ°ÁêÜÊµãËØï', async ({ page }) => {
    // Ê∑ªÂä†ÁªÑ‰ª∂Âπ∂ÈÄâÊã©
    await page.dragAndDrop('[data-testid="component-button"]', '[data-testid="canvas-drop-zone"]')
    await page.click('[data-component-id="button-1"]')

    // È™åËØÅÁÑ¶ÁÇπÂú®ÈÄâ‰∏≠ÁöÑÁªÑ‰ª∂‰∏ä
    const focused = await page.locator(':focus')
    await expect(focused).toBe('[data-component-id="button-1"]')

    // ÊµãËØïÊ®°ÊÄÅÊ°ÜÁÑ¶ÁÇπÁÆ°ÁêÜ
    await page.click('[data-testid="settings-button"]')
    const modal = page.locator('[data-testid="settings-modal"]')
    await expect(modal).toBeVisible()

    // ÁÑ¶ÁÇπÂ∫îËØ•Âú®Ê®°ÊÄÅÊ°ÜÂÜÖ
    const modalFocused = await page.locator(':focus')
    await expect(modalFocused).toBeWithin(modal)

    // ÂÖ≥Èó≠Ê®°ÊÄÅÊ°ÜÔºåÁÑ¶ÁÇπÂ∫îËøîÂõûÂéüÂÖÉÁ¥†
    await page.keyboard.press('Escape')
    await expect(modal).not.toBeVisible()
    const restoredFocus = await page.locator(':focus')
    await expect(restoredFocus).toBe('[data-component-id="button-1"]')
  })

  test('È¢úËâ≤ÂíåÂØπÊØîÂ∫¶ÊµãËØï', async ({ page }) => {
    // Ê£ÄÊü•‰∏ªÈ¢òÂàáÊç¢
    const themeToggle = page.locator('[data-testid="theme-toggle"]')
    if (await themeToggle.isVisible()) {
      await themeToggle.click()
      await page.waitForTimeout(500) // Á≠âÂæÖ‰∏ªÈ¢òÂàáÊç¢Âä®Áîª

      // ÂÜçÊ¨°Ê£ÄÊü•ÂèØËÆøÈóÆÊÄß
      await checkA11y(page, null, {
        rules: {
          // ÂêØÁî®È¢úËâ≤ÂØπÊØîÂ∫¶Ê£ÄÊü•
          'color-contrast': { enabled: true },
        },
      })
    }
  })
})
```

## 5. ÊÄßËÉΩÊµãËØïÁ≠ñÁï•

### 5.1 ÁªÑ‰ª∂Ê∏≤ÊüìÊÄßËÉΩÊµãËØï

```typescript
// tests/performance/component-rendering.test.ts
import { describe, test, expect, jest } from '@jest/globals'
import { render, screen } from '@testing-library/react'
import { PerformanceObserver } from 'perf_hooks'

describe('ÁªÑ‰ª∂Ê∏≤ÊüìÊÄßËÉΩÊµãËØï', () => {
  test('ButtonÁªÑ‰ª∂Ê∏≤ÊüìÊÄßËÉΩ', () => {
    const startTime = performance.now()

    // Ê∏≤Êüì1000‰∏™ÊåâÈíÆ
    const buttons = Array.from({ length: 1000 }, (_, i) => (
      <PageButton
        key={i}
        id={`button-${i}`}
        type="button"
        props={{ button: { text: `ÊåâÈíÆ${i}` } }}
        styles={{}}
        events={{}}
      />
    ))

    render(<div>{buttons}</div>)

    const endTime = performance.now()
    const renderTime = endTime - startTime

    // 1000‰∏™ÊåâÈíÆÂ∫îÂú®100msÂÜÖÊ∏≤ÊüìÂÆåÊàê
    expect(renderTime).toBeLessThan(100)

    // È™åËØÅÊâÄÊúâÊåâÈíÆÈÉΩÂ∑≤Ê∏≤Êüì
    expect(screen.getAllByRole('button')).toHaveLength(1000)
  })

  test('Â§çÊùÇÁªÑ‰ª∂ÊÄßËÉΩÊµãËØï', () => {
    const complexProps = {
      button: {
        text: 'Â§çÊùÇÊåâÈíÆ',
        variant: 'primary' as const,
        size: 'md' as const,
        loading: true,
        icon: 'üöÄ',
        icon_position: 'left' as const,
        onClick: 'console.log("clicked")'
      }
    }

    const complexStyles = {
      width: '200px',
      height: '60px',
      backgroundColor: '#ff0000',
      borderRadius: '8px',
      boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',
      transition: 'all 0.3s ease',
      transform: 'translateY(2px)',
    }

    const startTime = performance.now()

    render(
      <PageButton
        id="complex-button"
        type="button"
        props={complexProps}
        styles={complexStyles}
        events={{}}
      />
    )

    const endTime = performance.now()
    const renderTime = endTime - startTime

    // Â§çÊùÇÁªÑ‰ª∂Â∫îÂú®10msÂÜÖÊ∏≤ÊüìÂÆåÊàê
    expect(renderTime).toBeLessThan(10)
  })
})
```

### 5.2 ÂÜÖÂ≠òÊ≥ÑÊºèÊµãËØï

```typescript
// tests/performance/memory-leak.test.ts
import { describe, test, expect, jest } from '@jest/globals'
import { render, unmount, cleanup } from '@testing-library/react'
import { PageButton } from '@/components/lowcode/page-basic/PageButton'

describe('ÂÜÖÂ≠òÊ≥ÑÊºèÊµãËØï', () => {
  test('ÁªÑ‰ª∂Âç∏ËΩΩÂ∫îÊ∏ÖÁêÜÊâÄÊúâ‰∫ã‰ª∂ÁõëÂê¨Âô®', () => {
    const addEventListenerSpy = jest.spyOn(document, 'addEventListener')
    const removeEventListenerSpy = jest.spyOn(document, 'removeEventListener')

    // Ê∏≤ÊüìÁªÑ‰ª∂
    const { unmount } = render(<PageButton {...mockProps} />)

    const addedListeners = addEventListenerSpy.mock.calls.length
    addEventListenerSpy.mockClear()

    // Âç∏ËΩΩÁªÑ‰ª∂
    unmount()

    const removedListeners = removeEventListenerSpy.mock.calls.length

    // È™åËØÅÊâÄÊúâ‰∫ã‰ª∂ÁõëÂê¨Âô®ÈÉΩÂ∑≤ÁßªÈô§
    expect(removedListeners).toBeGreaterThanOrEqual(addedListeners)

    addEventListenerSpy.mockRestore()
    removeEventListenerSpy.mockRestore()
  })

  test('Â§ßÈáèÁªÑ‰ª∂ÂàõÂª∫ÂíåÈîÄÊØÅ‰∏çÂ∫îÂØºËá¥ÂÜÖÂ≠òÊ≥ÑÊºè', () => {
    const initialMemory = (performance as any).memory?.usedJSHeapSize || 0

    // ÂàõÂª∫ÂíåÈîÄÊØÅÂ§ßÈáèÁªÑ‰ª∂
    for (let i = 0; i < 1000; i++) {
      const { unmount } = render(
        <PageButton
          id={`button-${i}`}
          type="button"
          props={{ button: { text: `ÊåâÈíÆ${i}` } }}
          styles={{}}
          events={{}}
        />
      )
      unmount()
    }

    // Âº∫Âà∂ÂûÉÂúæÂõûÊî∂
    if (global.gc) {
      global.gc()
    }

    const finalMemory = (performance as any).memory?.usedJSHeapSize || 0
    const memoryGrowth = finalMemory - initialMemory

    // ÂÜÖÂ≠òÂ¢ûÈïøÂ∫îÂ∞è‰∫é10MB
    expect(memoryGrowth).toBeLessThan(10 * 1024 * 1024)
  })
})
```

## 6. ÂèØËÆøÈóÆÊÄßÊµãËØïÁ≠ñÁï•

### 6.1 Ëá™Âä®ÂåñÂèØËÆøÈóÆÊÄßÊµãËØï

```typescript
// tests/accessibility/automated.test.tsx
import { describe, test, expect, jest } from '@jest/globals'
import { render, screen, axe } from '@testing-library/react'
import { PageButton } from '@/components/lowcode/page-basic/PageButton'

describe('Ëá™Âä®ÂåñÂèØËÆøÈóÆÊÄßÊµãËØï', () => {
  test('ButtonÁªÑ‰ª∂Â∫îÈÄöËøáaxeÈ™åËØÅ', async () => {
    const { container } = render(<PageButton {...mockProps} />)

    const results = await axe(container)
    expect(results).toHaveNoViolations()
  })

  test('ÊâÄÊúâÂü∫Á°ÄÁªÑ‰ª∂Â∫îÈÄöËøáÂèØËÆøÈóÆÊÄßÈ™åËØÅ', async () => {
    const components = [
      { name: 'Button', component: <PageButton {...mockProps} /> },
      // Ê∑ªÂä†ÂÖ∂‰ªñÁªÑ‰ª∂
    ]

    for (const { name, component } of components) {
      const { container } = render(component)
      const results = await axe(container)

      expect(results).toHaveNoViolations()
    }
  })
})
```

### 6.2 ÊâãÂä®ÂèØËÆøÈóÆÊÄßÊµãËØïÊ∏ÖÂçï

```typescript
// tests/accessibility/manual-checklist.test.ts
describe('ÊâãÂä®ÂèØËÆøÈóÆÊÄßÊµãËØïÊ∏ÖÂçï', () => {
  test('ÈîÆÁõòÂØºËà™Ê∏ÖÂçï', () => {
    // [ ] ÊâÄÊúâ‰∫§‰∫íÂÖÉÁ¥†ÈÉΩÂèØ‰ª•ÈÄöËøáTabÈîÆËÆøÈóÆ
    // [ ] TabÈ°∫Â∫èÁ¨¶ÂêàÈÄªËæëÂíåËßÜËßâÈ°∫Â∫è
    // [ ] ÁÑ¶ÁÇπÊåáÁ§∫Âô®Ê∏ÖÊô∞ÂèØËßÅ
    // [ ] ÊîØÊåÅShift+TabÂèçÂêëÂØºËà™
    // [ ] EnterÂíåÁ©∫Ê†ºÈîÆÂèØ‰ª•ÊøÄÊ¥ªÊåâÈíÆ
    // [ ] EscapeÈîÆÂèØ‰ª•ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü
    // [ ] ÊñπÂêëÈîÆÂèØ‰ª•ÂØºËà™ËèúÂçïÂíåÂàóË°®
  })

  test('Â±èÂπïÈòÖËØªÂô®ÊîØÊåÅÊ∏ÖÂçï', () => {
    // [ ] ÊâÄÊúâÂõæÂÉèÈÉΩÊúâaltÊñáÊú¨
    // [ ] Ë°®ÂçïÂÖÉÁ¥†ÊúâÂÖ≥ËÅîÁöÑlabel
    // [ ] ‰∫§‰∫íÂÖÉÁ¥†ÊúâÈÄÇÂΩìÁöÑroleÂ±ûÊÄß
    // [ ] Áä∂ÊÄÅÂèòÂåñ‰ºöÈÄöËøáaria-liveÂå∫ÂüüÈÄöÁü•
    // [ ] È°µÈù¢Ê†áÈ¢òÊ≠£Á°ÆÊèèËø∞È°µÈù¢ÂÜÖÂÆπ
    // [ ] Ê†áÈ¢òÂ±ÇÁ∫ßÁªìÊûÑÊ≠£Á°Æ
  })

  test('È¢úËâ≤ÂíåÂØπÊØîÂ∫¶Ê∏ÖÂçï', () => {
    // [ ] ÊñáÊú¨ÂíåËÉåÊôØÂØπÊØîÂ∫¶Ëá≥Â∞ë4.5:1
    // [ ] Â§ßÊñáÊú¨ÂØπÊØîÂ∫¶Ëá≥Â∞ë3:1
    // [ ] ‰∫§‰∫íÂÖÉÁ¥†ÊúâÈùûÈ¢úËâ≤ÁöÑËßÜËßâÊåáÁ§∫
    // [ ] ÊîØÊåÅÈ´òÂØπÊØîÂ∫¶Ê®°Âºè
    // [ ] Ëâ≤Áõ≤Áî®Êà∑ÂèØ‰ª•Âå∫ÂàÜÊâÄÊúâÂÖÉÁ¥†
  })

  test('ÂìçÂ∫îÂºèÂíåÁº©ÊîæÊ∏ÖÂçï', () => {
    // [ ] ÊîæÂ§ßÂà∞200%Êó∂ÂÜÖÂÆπ‰ªçÁÑ∂ÂèØÁî®
    // [ ] Ê®™ÂêëÊªöÂä®‰∏ç‰ºöÈöêËóèÂÜÖÂÆπ
    // [ ] Ëß¶Êë∏ÁõÆÊ†áËá≥Â∞ë44x44ÂÉèÁ¥†
    // [ ] ÊñáÊú¨‰∏ç‰ºöÂõ†Áº©ÊîæËÄåÈáçÂè†
    // [ ] Âú®ÁßªÂä®ËÆæÂ§á‰∏äÊòì‰∫éÊìç‰Ωú
  })
})
```

## 7. ÊµãËØïÂ∑•ÂÖ∑ÈÖçÁΩÆÂª∫ËÆÆ

### 7.1 JestÈÖçÁΩÆ‰ºòÂåñ

```typescript
// jest.config.ts
import type { Config } from 'jest'
import nextJest from 'next/jest.js'

const createJestConfig = nextJest({
  dir: './',
})

const config: Config = {
  coverageProvider: 'v8',
  testEnvironment: 'jsdom',
  setupFilesAfterEnv: ['<rootDir>/jest.setup.js', '<rootDir>/tests/setup/test-setup.ts'],
  testMatch: [
    '<rootDir>/tests/**/__tests__/**/*.{js,jsx,ts,tsx}',
    '<rootDir>/tests/**/*.{test,spec}.{js,jsx,ts,tsx}',
  ],
  collectCoverageFrom: [
    'components/**/*.{js,jsx,ts,tsx}',
    'lib/**/*.{js,jsx,ts,tsx}',
    'hooks/**/*.{js,jsx,ts,tsx}',
    'stores/**/*.{js,jsx,ts,tsx}',
    '!**/*.d.ts',
    '!**/node_modules/**',
    '!**/tests/**',
    '!**/__tests__/**',
  ],
  moduleNameMapper: {
    '^@/(.*)$': '<rootDir>/$1',
    '^@/components/(.*)$': '<rootDir>/components/$1',
    '^@/lib/(.*)$': '<rootDir>/lib/$1',
    '^@/types/(.*)$': '<rootDir>/types/$1',
  },
  transform: {
    '^.+\\.(js|jsx|ts|tsx)$': ['babel-jest', { presets: ['next/babel'] }],
  },
  testTimeout: 10000,
  maxConcurrency: 5,
  verbose: true,
  coverageThreshold: {
    global: {
      branches: 80,
      functions: 80,
      lines: 80,
      statements: 80,
    },
    // ÁâπÂÆöÊñá‰ª∂ÁöÑË¶ÜÁõñÁéáË¶ÅÊ±Ç
    'components/lowcode/**/*.{js,jsx,ts,tsx}': {
      branches: 90,
      functions: 90,
      lines: 90,
      statements: 90,
    },
  },
  // ÊÄßËÉΩÁõ∏ÂÖ≥ÈÖçÁΩÆ
  maxWorkers: '50%',
  cache: true,
  cacheDirectory: '<rootDir>/.jest-cache',
}

export default createJestConfig(config)
```

### 7.2 ÊµãËØïÂ∑•ÂÖ∑Êâ©Â±ïÈÖçÁΩÆ

```typescript
// tests/setup/test-setup.ts
import '@testing-library/jest-dom'
import { configure } from '@testing-library/react'

// ÈÖçÁΩÆTesting Library
configure({
  testIdAttribute: 'data-testid',
  asyncUtilTimeout: 5000,
})

// ÂÖ®Â±ÄÊµãËØïÂ∑•ÂÖ∑
global.createMockEvent = (type: string, data: any = {}) => {
  const event = new Event(type, { bubbles: true })
  Object.assign(event, data)
  return event
}

global.waitFor = (ms: number) => new Promise(resolve => setTimeout(resolve, ms))

// Ê®°ÊãüIntersection Observer
global.IntersectionObserver = class IntersectionObserver {
  constructor() {}
  observe() {}
  unobserve() {}
  disconnect() {}
}

// Ê®°ÊãüResizeObserver
global.ResizeObserver = class ResizeObserver {
  constructor() {}
  observe() {}
  unobserve() {}
  disconnect() {}
}

// Ê®°ÊãümatchMedia
Object.defineProperty(window, 'matchMedia', {
  writable: true,
  value: jest.fn().mockImplementation(query => ({
    matches: false,
    media: query,
    onchange: null,
    addListener: jest.fn(),
    removeListener: jest.fn(),
    addEventListener: jest.fn(),
    removeEventListener: jest.fn(),
    dispatchEvent: jest.fn(),
  })),
})
```

### 7.3 CI/CDÈõÜÊàêÈÖçÁΩÆ

```yaml
# .github/workflows/test.yml
name: ÊµãËØïÊµÅÊ∞¥Á∫ø

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest

    strategy:
      matrix:
        node-version: [18.x, 20.x]

    steps:
      - uses: actions/checkout@v4

      - name: ‰ΩøÁî® Node.js ${{ matrix.node-version }}
        uses: actions/setup-node@v4
        with:
          node-version: ${{ matrix.node-version }}
          cache: 'pnpm'

      - name: ÂÆâË£Ö‰æùËµñ
        run: pnpm install --frozen-lockfile

      - name: ËøêË°å ESLint
        run: pnpm lint

      - name: ËøêË°åÁ±ªÂûãÊ£ÄÊü•
        run: pnpm type-check

      - name: ËøêË°åÂçïÂÖÉÊµãËØï
        run: pnpm test:coverage

      - name: ‰∏ä‰º†Ë¶ÜÁõñÁéáÊä•Âëä
        uses: codecov/codecov-action@v3
        with:
          file: ./coverage/lcov.info
          flags: unittests
          name: codecov-umbrella

      - name: ÊûÑÂª∫È°πÁõÆ
        run: pnpm build

  e2e-test:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4

      - name: ‰ΩøÁî® Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20.x'
          cache: 'pnpm'

      - name: ÂÆâË£Ö‰æùËµñ
        run: pnpm install --frozen-lockfile

      - name: ÂÆâË£Ö Playwright
        run: pnpm exec playwright install --with-deps

      - name: ÊûÑÂª∫Â∫îÁî®
        run: pnpm build

      - name: ËøêË°å E2E ÊµãËØï
        run: pnpm test:e2e

      - name: ‰∏ä‰º†ÊµãËØïÊä•Âëä
        uses: actions/upload-artifact@v3
        if: failure()
        with:
          name: playwright-report
          path: playwright-report/
          retention-days: 30

  performance-test:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4

      - name: ‰ΩøÁî® Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20.x'
          cache: 'pnpm'

      - name: ÂÆâË£Ö‰æùËµñ
        run: pnpm install --frozen-lockfile

      - name: ÊûÑÂª∫Â∫îÁî®
        run: pnpm build

      - name: ËøêË°åÊÄßËÉΩÊµãËØï
        run: pnpm test:performance

      - name: ËøêË°å Lighthouse CI
        run: |
          npm install -g @lhci/cli
          lhci autorun
        env:
          LHCI_GITHUB_APP_TOKEN: ${{ secrets.LHCI_GITHUB_APP_TOKEN }}
```

### 7.4 ÂåÖ.jsonËÑöÊú¨Êõ¥Êñ∞

```json
{
  "scripts": {
    "test": "jest",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage",
    "test:ci": "jest --ci --coverage --watchAll=false",
    "test:unit": "jest tests/components",
    "test:integration": "jest tests/integration",
    "test:performance": "jest tests/performance",
    "test:accessibility": "jest tests/accessibility",
    "test:e2e": "playwright test",
    "test:e2e:ui": "playwright test --ui",
    "test:e2e:debug": "playwright test --debug",
    "test:all": "pnpm lint && pnpm type-check && pnpm test:coverage && pnpm test:e2e"
  },
  "devDependencies": {
    "@playwright/test": "^1.40.0",
    "@testing-library/jest-dom": "^6.1.0",
    "@testing-library/react": "^14.0.0",
    "@testing-library/user-event": "^14.5.0",
    "@types/jest": "^29.5.0",
    "axe-playwright": "^2.0.0",
    "jest": "^29.7.0",
    "jest-environment-jsdom": "^29.7.0",
    "lighthouse": "^11.0.0",
    "playwright": "^1.40.0"
  }
}
```

## 8. ÊµãËØïÁî®‰æãËÆæËÆ°Âª∫ËÆÆ

### 8.1 ÊµãËØïÁî®‰æãÊ®°Êùø

```typescript
// tests/templates/component-test-template.tsx
import { describe, test, expect, jest, beforeEach, afterEach } from '@jest/globals'
import { render, screen, fireEvent, waitFor, cleanup } from '@testing-library/react'
import userEvent from '@testing-library/user-event'
import { ComponentName } from '@/components/path/to/ComponentName'

describe('ComponentName', () => {
  let user: ReturnType<typeof userEvent.setup>

  beforeEach(() => {
    user = userEvent.setup()
  })

  afterEach(() => {
    cleanup()
    jest.clearAllMocks()
  })

  describe('Ê∏≤ÊüìÊµãËØï', () => {
    test('Â∫îËØ•Ê≠£Á°ÆÊ∏≤ÊüìÈªòËÆ§Áä∂ÊÄÅ', () => {
      // ÊµãËØï‰ª£Á†Å
    })

    test('Â∫îËØ•Ê≠£Á°ÆÂ§ÑÁêÜÂøÖÈúÄÂ±ûÊÄß', () => {
      // ÊµãËØï‰ª£Á†Å
    })

    test('Â∫îËØ•Ê≠£Á°ÆÂ∫îÁî®ÂèØÈÄâÂ±ûÊÄß', () => {
      // ÊµãËØï‰ª£Á†Å
    })
  })

  describe('‰∫§‰∫íÊµãËØï', () => {
    test('Â∫îËØ•Ê≠£Á°ÆÂ§ÑÁêÜÁÇπÂáª‰∫ã‰ª∂', async () => {
      // ÊµãËØï‰ª£Á†Å
    })

    test('Â∫îËØ•Ê≠£Á°ÆÂ§ÑÁêÜÈîÆÁõò‰∫ã‰ª∂', async () => {
      // ÊµãËØï‰ª£Á†Å
    })
  })

  describe('Áä∂ÊÄÅÊµãËØï', () => {
    test('Â∫îËØ•Ê≠£Á°ÆÂ§ÑÁêÜÂä†ËΩΩÁä∂ÊÄÅ', () => {
      // ÊµãËØï‰ª£Á†Å
    })

    test('Â∫îËØ•Ê≠£Á°ÆÂ§ÑÁêÜÈîôËØØÁä∂ÊÄÅ', () => {
      // ÊµãËØï‰ª£Á†Å
    })
  })

  describe('ÂèØËÆøÈóÆÊÄßÊµãËØï', () => {
    test('Â∫îËØ•ÊúâÊ≠£Á°ÆÁöÑARIAÂ±ûÊÄß', () => {
      // ÊµãËØï‰ª£Á†Å
    })

    test('Â∫îËØ•ÊîØÊåÅÈîÆÁõòÂØºËà™', async () => {
      // ÊµãËØï‰ª£Á†Å
    })
  })
})
```

### 8.2 ÊµãËØïÊï∞ÊçÆÂ∑•ÂéÇ

```typescript
// tests/factories/component-factory.ts
import { ComponentInstance, ComponentRendererProps } from '@/types/page-designer/component'

export class ComponentFactory {
  static createButton(overrides: Partial<ComponentRendererProps> = {}): ComponentRendererProps {
    return {
      id: 'button-1',
      type: 'button',
      props: {
        button: {
          text: 'ÊµãËØïÊåâÈíÆ',
          variant: 'primary',
          size: 'md',
          disabled: false,
        },
      },
      styles: {},
      events: {},
      ...overrides,
    }
  }

  static createInput(overrides: Partial<ComponentRendererProps> = {}): ComponentRendererProps {
    return {
      id: 'input-1',
      type: 'input',
      props: {
        input: {
          type: 'text',
          placeholder: 'ËØ∑ËæìÂÖ•ÂÜÖÂÆπ',
          required: false,
          disabled: false,
        },
      },
      styles: {},
      events: {},
      ...overrides,
    }
  }

  static createContainer(overrides: Partial<ComponentRendererProps> = {}): ComponentRendererProps {
    return {
      id: 'container-1',
      type: 'container',
      props: {
        container: {
          direction: 'column',
          gap: 16,
          padding: 16,
        },
      },
      styles: {},
      events: {},
      ...overrides,
    }
  }
}
```

## 9. ÊÄªÁªì

Êú¨ÊµãËØïÁ≠ñÁï•Êèê‰æõ‰∫ÜÂÖ®Èù¢ÁöÑ‰Ωé‰ª£Á†ÅÂπ≥Âè∞ÁªÑ‰ª∂Â∫ìÊµãËØïÊñπÊ°àÔºåÂåÖÊã¨Ôºö

1. **ÂçïÂÖÉÊµãËØï**: Ë¶ÜÁõñÁªÑ‰ª∂ÁöÑÂü∫Êú¨ÂäüËÉΩ„ÄÅÂ±ûÊÄßÈÖçÁΩÆÂíå‰∫ã‰ª∂Â§ÑÁêÜ
2. **ÈõÜÊàêÊµãËØï**: È™åËØÅÁªÑ‰ª∂Èó¥‰∫§‰∫í„ÄÅÊãñÊãΩÊìç‰ΩúÂíåÁä∂ÊÄÅÁÆ°ÁêÜ
3. **E2EÊµãËØï**: Á°Æ‰øùÂÆåÊï¥ÁöÑÁî®Êà∑Â∑•‰ΩúÊµÅÁ®ãÊ≠£Â∏∏ËøêË°å
4. **ÊÄßËÉΩÊµãËØï**: ‰øùËØÅÁªÑ‰ª∂Ê∏≤ÊüìÂíå‰∫§‰∫íÊÄßËÉΩËææÊ†á
5. **ÂèØËÆøÈóÆÊÄßÊµãËØï**: Á°Æ‰øùÁ¨¶ÂêàWCAG 2.1 AAÊ†áÂáÜ

ÈÄöËøáËøôÂ•óÂÆåÊï¥ÁöÑÊµãËØïÁ≠ñÁï•ÔºåÂèØ‰ª•Á°Æ‰øù‰Ωé‰ª£Á†ÅÂπ≥Âè∞ÁªÑ‰ª∂Â∫ìÁöÑË¥®Èáè„ÄÅÊÄßËÉΩÂíåÂèØËÆøÈóÆÊÄßÔºå‰∏∫Áî®Êà∑Êèê‰æõÁ®≥ÂÆöÂèØÈù†ÁöÑ‰ΩøÁî®‰ΩìÈ™å„ÄÇ

### ÂÖ≥ÈîÆÊàêÂäüÂõ†Á¥†

1. **È´òÊµãËØïË¶ÜÁõñÁéá**: ÂçïÂÖÉÊµãËØïË¶ÜÁõñÁéáÂ∫îËææÂà∞80%‰ª•‰∏ä
2. **Âø´ÈÄüÂèçÈ¶à**: ÂçïÂÖÉÊµãËØïÂ∫îÂú®ÁßíÁ∫ßÂÆåÊàê
3. **ÁúüÂÆûÂú∫ÊôØ**: E2EÊµãËØïË¶ÜÁõñÂÆûÈôÖÁî®Êà∑‰ΩøÁî®Âú∫ÊôØ
4. **ÊåÅÁª≠ÈõÜÊàê**: ÊâÄÊúâÊµãËØïÈÉΩÂ∫îÈõÜÊàêÂà∞CI/CDÊµÅÊ∞¥Á∫ø
5. **ÂÆöÊúüÂÆ°Êü•**: ÂÆöÊúüÂÆ°Êü•ÂíåÊõ¥Êñ∞ÊµãËØïÁî®‰æã

### ‰∏ã‰∏ÄÊ≠•Ë°åÂä®

1. Ê†πÊçÆÊú¨ÊñáÊ°£ÈÖçÁΩÆÊµãËØïÁéØÂ¢É
2. ÂÆûÊñΩÂü∫Á°ÄÁªÑ‰ª∂ÁöÑÂçïÂÖÉÊµãËØï
3. ÈÄêÊ≠•Ê∑ªÂä†ÈõÜÊàêÊµãËØïÂíåE2EÊµãËØï
4. Âª∫Á´ãÊÄßËÉΩÁõëÊéßÂíåÂèØËÆøÈóÆÊÄßÊ£ÄÊü•ÊµÅÁ®ã
5. ÂüπËÆ≠ÂºÄÂèëÂõ¢ÈòüÊµãËØïÊúÄ‰Ω≥ÂÆûË∑µ
